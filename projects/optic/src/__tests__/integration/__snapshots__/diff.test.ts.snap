// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`diff file doesn't exist 1`] = `
"[31mError opening file "$workspace$/doesnt-exist.json" [39m
[31mENOENT: no such file or directory, open '$workspace$/doesnt-exist.json'[39m
"
`;

exports[`diff petstore diff 1`] = `
"[31mx [39m[1mSwagger Petstore Updated[22m [90mpetstore-base.json[39m
[1mOperations: [22m5 operations added, 16 changed, 1 removed
[31mx [39m [1mChecks:[22m 191/247 passed 

specification details:
- /servers/2 [32madded[39m
- /info/title [33mchanged[39m

[31mx [1mGET[22m /pet/findByStatus[39m: [32madded[39m
  
  [31m[1mx [operation path component naming check][22m findByStatus is not snake_case[39m
  at [4mpetstore-updated.json:332:11417[24m
  
  - query parameter [3mstatus[23m: 
  - cookie parameter [3mdebug[23m: 
  - response [1m200[22m: 
    - body [1mapplication/xml[22m: 
      - property [1m/schema/items/properties/photoUrls[22m: 
      
        [31m[1mx [response property naming check][22m photoUrls is not snake_case[39m
        at [4mpetstore-updated.json:383:13267[24m
        
    - body [1mapplication/json[22m: 
      - property [1m/schema/items/properties/photoUrls[22m: 
      
        [31m[1mx [response property naming check][22m photoUrls is not snake_case[39m
        at [4mpetstore-updated.json:427:15128[24m
        
[31mx [1mGET[22m /pet/findByTags[39m: [32madded[39m
  
  [31m[1mx [operation path component naming check][22m findByTags is not snake_case[39m
  at [4mpetstore-updated.json:462:16442[24m
  
  - query parameter [3mtags[23m: 
  - response [1m200[22m: 
    - body [1mapplication/xml[22m: 
      - property [1m/schema/items/properties/photoUrls[22m: 
      
        [31m[1mx [response property naming check][22m photoUrls is not snake_case[39m
        at [4mpetstore-updated.json:499:17900[24m
        
    - body [1mapplication/json[22m: 
      - property [1m/schema/items/properties/photoUrls[22m: 
      
        [31m[1mx [response property naming check][22m photoUrls is not snake_case[39m
        at [4mpetstore-updated.json:543:19761[24m
        
[31mx [1mGET[22m /pet/{petId}[39m: [32madded[39m
  
  - response [1m200[22m: 
    - body [1mapplication/xml[22m: 
      - property [1m/schema/properties/photoUrls[22m: 
      
        [31m[1mx [response property naming check][22m photoUrls is not snake_case[39m
        at [4mpetstore-updated.json:612:22309[24m
        
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/photoUrls[22m: 
      
        [31m[1mx [response property naming check][22m photoUrls is not snake_case[39m
        at [4mpetstore-updated.json:653:24012[24m
        
[32mâœ” [1mPOST[22m /pet/{petId}[39m: [32madded[39m
  
[32mâœ” [1mDELETE[22m /pet/{petId}[39m: [32madded[39m
  
  - header parameter [3mapi_key[23m: 
[31mx [1mPUT[22m /user/{username}[39m: 
  - request: 
    - body [1m*/*[22m: 
      - property [1m/schema/properties/phone[22m: [31mremoved[39m
      - property [1m/schema/properties/bio[22m: [32madded[39m
      - property [1m/schema/properties/userStatus[22m: [33mchanged[39m
      
        [31m[1mx [prevent request property type changes][22m expected request body property 'userStatus' not to be narrowed. This is a breaking change.[39m
        at [4mpetstore-updated.json:1363:49066[24m
        
        [31m[1mx [request and response property enums][22m cannot add enum or const to request property userStatus. This is a breaking change.[39m
        at [4mpetstore-updated.json:1363:49066[24m
        
      - property [1m/schema/properties/lastName[22m: [33mchanged[39m
      - property [1m/schema/properties/username[22m: [33mchanged[39m
      
        [31m[1mx [prevent changing request property to required][22m cannot make a request property required. This is a breaking change.[39m
        at [4mpetstore-updated.json:1358:48808[24m
        
[31mx [1mGET[22m /user/{username}[39m: 
  - response [1m200[22m: 
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/phone[22m: [31mremoved[39m
      
        [31m[1mx [prevent removing response property][22m cannot remove response property 'phone'. This is a breaking change.[39m
        at [4mpetstore-base.json:858:30351[24m
        
      - property [1m/schema/properties/bio[22m: [32madded[39m
      - property [1m/schema/properties/userStatus[22m: [33mchanged[39m
      
        [31m[1mx [prevent response property type changes][22m expected response body property 'userStatus' not to be expanded. This is a breaking change.[39m
        at [4mpetstore-updated.json:1305:47055[24m
        
      - property [1m/schema/properties/lastName[22m: [33mchanged[39m
      
        [31m[1mx [prevent making response property optional][22m cannot make required response property 'lastName' optional. This is a breaking change.[39m
        at [4mpetstore-updated.json:1302:46896[24m
        
      - property [1m/schema/properties/username[22m: [33mchanged[39m
    - body [1mapplication/xml[22m: 
      - property [1m/schema/properties/phone[22m: [31mremoved[39m
      
        [31m[1mx [prevent removing response property][22m cannot remove response property 'phone'. This is a breaking change.[39m
        at [4mpetstore-base.json:837:29466[24m
        
      - property [1m/schema/properties/bio[22m: [32madded[39m
      - property [1m/schema/properties/userStatus[22m: [33mchanged[39m
      
        [31m[1mx [prevent response property type changes][22m expected response body property 'userStatus' not to be expanded. This is a breaking change.[39m
        at [4mpetstore-updated.json:1284:46136[24m
        
      - property [1m/schema/properties/lastName[22m: [33mchanged[39m
      
        [31m[1mx [prevent making response property optional][22m cannot make required response property 'lastName' optional. This is a breaking change.[39m
        at [4mpetstore-updated.json:1281:45977[24m
        
      - property [1m/schema/properties/username[22m: [33mchanged[39m
  - response [1m404[22m: 
    - body [1mapplication/json[22m: [32madded[39m
      - property : [32madded[39m
[31mx [1mGET[22m /user/login[39m: 
  - response [1m200[22m: 
    - response header [3mcontent-type[23m: [31mremoved[39m
    - response header [3mX-Rate-Limit[23m: [32madded[39m
      
    [31m[1mx [header parameter naming check][22m X-Rate-Limit is not snake_case[39m
    at [4mpetstore-updated.json:1224:44029[24m
    
    - response header [3mX-Expires-After[23m: 
      - /schema/type [33mchanged[39m
      
    - response header [3mX-Expires-After[23m: [32madded[39m
      - /schema/format [32madded[39m
      
[31mx [1mPOST[22m /user/createWithList[39m: 
  - request: 
    - body [1m*/*[22m: 
      - property [1m/schema/items/properties/phone[22m: [31mremoved[39m
      - property [1m/schema/items/properties/bio[22m: [32madded[39m
      - property [1m/schema/items/properties/userStatus[22m: [33mchanged[39m
      
        [31m[1mx [prevent request property type changes][22m expected request body property 'userStatus' not to be narrowed. This is a breaking change.[39m
        at [4mpetstore-updated.json:1179:42689[24m
        
        [31m[1mx [request and response property enums][22m cannot add enum or const to request property userStatus. This is a breaking change.[39m
        at [4mpetstore-updated.json:1179:42689[24m
        
      - property : [33mchanged[39m
      - property [1m/schema/items/properties/username[22m: 
      
        [31m[1mx [prevent changing request property to required][22m cannot make a request property required. This is a breaking change.[39m
        at [4mpetstore-updated.json:1174:42421[24m
        
[31mx [1mPOST[22m /user/createWithArray[39m: 
  - request: 
    - body [1m*/*[22m: 
      - property [1m/schema/items/properties/phone[22m: [31mremoved[39m
      - property [1m/schema/items/properties/bio[22m: [32madded[39m
      - property [1m/schema/items/properties/userStatus[22m: [33mchanged[39m
      
        [31m[1mx [prevent request property type changes][22m expected request body property 'userStatus' not to be narrowed. This is a breaking change.[39m
        at [4mpetstore-updated.json:1138:41204[24m
        
        [31m[1mx [request and response property enums][22m cannot add enum or const to request property userStatus. This is a breaking change.[39m
        at [4mpetstore-updated.json:1138:41204[24m
        
      - property : [33mchanged[39m
      - property [1m/schema/items/properties/username[22m: 
      
        [31m[1mx [prevent changing request property to required][22m cannot make a request property required. This is a breaking change.[39m
        at [4mpetstore-updated.json:1133:40936[24m
        
[31mx [1mPOST[22m /user[39m: 
  - request: 
    - body [1m*/*[22m: 
      - property [1m/schema/properties/phone[22m: [31mremoved[39m
      - property [1m/schema/properties/bio[22m: [32madded[39m
      - property [1m/schema/properties/userStatus[22m: [33mchanged[39m
      
        [31m[1mx [prevent request property type changes][22m expected request body property 'userStatus' not to be narrowed. This is a breaking change.[39m
        at [4mpetstore-updated.json:1098:39749[24m
        
        [31m[1mx [request and response property enums][22m cannot add enum or const to request property userStatus. This is a breaking change.[39m
        at [4mpetstore-updated.json:1098:39749[24m
        
      - property [1m/schema/properties/lastName[22m: [33mchanged[39m
      - property [1m/schema/properties/username[22m: [33mchanged[39m
      
        [31m[1mx [prevent changing request property to required][22m cannot make a request property required. This is a breaking change.[39m
        at [4mpetstore-updated.json:1093:39491[24m
        
[32mâœ” [1mDELETE[22m /store/order/{orderId}[39m: 
  - response [1m404[22m: 
    - body [1mapplication/json[22m: [32madded[39m
      - property : [32madded[39m
[31mx [1mGET[22m /store/order/{orderId}[39m: 
  - response [1m200[22m: 
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/summary[22m: [32madded[39m
      - property [1m/schema/properties/status[22m: [33mchanged[39m
      
        [31m[1mx [request and response property enums][22m cannot add enum option 'canceled' from 'status' property. This is a breaking change.[39m
        at [4mpetstore-updated.json:1010:36620[24m
        
    - body [1mapplication/xml[22m: 
      - property [1m/schema/properties/summary[22m: [32madded[39m
      - property [1m/schema/properties/status[22m: [33mchanged[39m
      
        [31m[1mx [request and response property enums][22m cannot add enum option 'canceled' from 'status' property. This is a breaking change.[39m
        at [4mpetstore-updated.json:988:35642[24m
        
      - property [1m/schema/properties/petId[22m: [33mchanged[39m
      
        [31m[1mx [prevent making response property optional][22m cannot make required response property 'petId' optional. This is a breaking change.[39m
        at [4mpetstore-updated.json:985:35420[24m
        
  - response [1m404[22m: 
    - body [1mapplication/json[22m: [32madded[39m
      - property : [32madded[39m
[31mx [1mPOST[22m /store/order[39m: 
  - request: 
    - body [1m*/*[22m: 
      - property [1m/schema/properties/summary[22m: [32madded[39m
      - property [1m/schema/properties/status[22m: [33mchanged[39m
      
        [31m[1mx [request and response property enums][22m cannot remove enum option 'approved' from 'status' property. This is a breaking change.[39m
        at [4mpetstore-updated.json:874:31243[24m
        
  - response [1m200[22m: 
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/summary[22m: [32madded[39m
      - property [1m/schema/properties/status[22m: [33mchanged[39m
      
        [31m[1mx [request and response property enums][22m cannot add enum option 'canceled' from 'status' property. This is a breaking change.[39m
        at [4mpetstore-updated.json:934:33677[24m
        
        - /example [32madded[39m
        
    - body [1mapplication/xml[22m: 
      - property [1m/schema/properties/summary[22m: [32madded[39m
      - property [1m/schema/properties/status[22m: [33mchanged[39m
      
        [31m[1mx [request and response property enums][22m cannot add enum option 'canceled' from 'status' property. This is a breaking change.[39m
        at [4mpetstore-updated.json:903:32362[24m
        
[31mx [1mPOST[22m /pet/{petId}/uploadImage[39m: 
  - cookie parameter [3mdebug[23m: 
    - /schema/enum [32madded[39m
    
    [31m[1mx [prevent cookie parameters enum breaking changes][22m cannot add an enum to restrict possible values for cookie parameter debug. This is a breaking change.[39m
    at [4mpetstore-updated.json:756:27507[24m
    
  - response [1m200[22m: [31mremoved[39m
    [31m[1mx [prevent response status code removal][22m must not remove response status code 200. This is a breaking change.[39m
    at [4mpetstore-base.json:409:14250[24m
    
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/code[22m: 
      
        [31m[1mx [prevent removing response property][22m cannot remove response property 'code'. This is a breaking change.[39m
        at [4mpetstore-base.json:416:14489[24m
        
      - property [1m/schema/properties/type[22m: 
      
        [31m[1mx [prevent removing response property][22m cannot remove response property 'type'. This is a breaking change.[39m
        at [4mpetstore-base.json:417:14559[24m
        
      - property [1m/schema/properties/message[22m: 
      
        [31m[1mx [prevent removing response property][22m cannot remove response property 'message'. This is a breaking change.[39m
        at [4mpetstore-base.json:418:14609[24m
        
  - response [1m201[22m: [32madded[39m
    - body [1mapplication/json[22m: 
  - response [1m404[22m: [32madded[39m
    - body [1mapplication/json[22m: 
  - response [1mdefault[22m: 
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/type[22m: [33mchanged[39m
      
        [31m[1mx [prevent response property type changes][22m expected response body property 'type' not to be expanded. This is a breaking change.[39m
        at [4mpetstore-updated.json:822:29591[24m
        
[31mx [1mGET[22m /pet[39m: [31mremoved[39m
  
  [31m[1mx [prevent operation removal][22m cannot remove an operation. This is a breaking change.[39m
  at [4mpetstore-base.json:168:5393[24m
  
    [31m[1mx [prevent response status code removal][22m must not remove response status code 404. This is a breaking change.[39m
    at [4mpetstore-base.json:170:5435[24m
    
    [31m[1mx [prevent response status code removal][22m must not remove response status code 405. This is a breaking change.[39m
    at [4mpetstore-base.json:171:5503[24m
    
[32mâœ” [1mPOST[22m /pet[39m: 
  - /operationId [33mchanged[39m
  
[31mx [1mPUT[22m /pet[39m: 
  - request: 
    - body [1mapplication/xml[22m: [31mremoved[39m
      - property : [31mremoved[39m
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/name[22m: [31mremoved[39m
      - property [1m/schema/properties/number[22m: [32madded[39m
      
        [31m[1mx [prevent changing request property to required][22m cannot add a required request property 'number' to an existing operation. This is a breaking change.[39m
        at [4mpetstore-updated.json:189:6031[24m
        
  - response [1m400[22m: [31mremoved[39m
    [31m[1mx [prevent response status code removal][22m must not remove response status code 400. This is a breaking change.[39m
    at [4mpetstore-base.json:264:9048[24m
    
[31mx [1mGET[22m /parameters_at_path[39m: 
  - query parameter [3mquery_in_path[23m: [32madded[39m
    
    [31m[1mx [prevent new required query parameters][22m cannot add required query parameter query_in_path to an existing operation. This is a breaking change.[39m
    at [4mpetstore-updated.json:159:5186[24m
    
[31mx [1mPATCH[22m /example[39m: 
  - query parameter [3mseomthing[23m: [32madded[39m
    
    [31m[1mx [prevent new required query parameters][22m cannot add required query parameter seomthing to an existing operation. This is a breaking change.[39m
    at [4mpetstore-updated.json:146:4890[24m
    
[32mâœ” [1mPOST[22m /example[39m: 
  - query parameter [3msomethingelse[23m: [31mremoved[39m
[31mx [1mGET[22m /example[39m: 
  - query parameter [3mdeletedQueryParameter[23m: [31mremoved[39m
  - query parameter [3maddedQueryParameter[23m: [32madded[39m
    
    [31m[1mx [prevent new required query parameters][22m cannot add required query parameter addedQueryParameter to an existing operation. This is a breaking change.[39m
    at [4mpetstore-updated.json:60:1906[24m
    
    [31m[1mx [query parameter naming check][22m addedQueryParameter is not snake_case[39m
    at [4mpetstore-updated.json:60:1906[24m
    
  - query parameter [3mrequiredToOptional[23m: 
    - /required [31mremoved[39m
    
  - query parameter [3moptionalToRequired[23m: 
    - /required [32madded[39m
    
    [31m[1mx [prevent requiring existing query parameters][22m cannot make optional query parameter 'optionalToRequired' required. This is a breaking change.[39m
    at [4mpetstore-updated.json:47:1494[24m
    
  - response [1m200[22m: 
    - body [1mapplication/json[22m: 
      - property [1m/schema/properties/toTypeArrays[22m: [33mchanged[39m
      
        [31m[1mx [prevent response property type changes][22m expected response body property 'toTypeArrays' not to be expanded. This is a breaking change.[39m
        at [4mpetstore-updated.json:123:4350[24m
        
      - property [1m/schema/properties/fromTypeArrays[22m: [33mchanged[39m
      - property [1m/schema/properties/requiredKeys/properties/requiredToOptional[22m: [33mchanged[39m
      
        [31m[1mx [prevent making response property optional][22m cannot make required response property 'requiredToOptional' optional. This is a breaking change.[39m
        at [4mpetstore-updated.json:118:4096[24m
        
      - property [1m/schema/properties/requiredKeys/properties/deletedRequiredKey[22m: [31mremoved[39m
      
        [31m[1mx [prevent removing response property][22m cannot remove response property 'deletedRequiredKey'. This is a breaking change.[39m
        at [4mpetstore-base.json:119:4161[24m
        
      - property [1m/schema/properties/requiredKeys/properties/optionalToRequired[22m: [33mchanged[39m
      - property [1m/schema/properties/requiredKeys/properties/addedRequiredKey[22m: [32madded[39m
      
        [31m[1mx [response property naming check][22m addedRequiredKey is not snake_case[39m
        at [4mpetstore-updated.json:119:4164[24m
        
      - property [1m/schema/properties/expandableObject[22m: [33mchanged[39m
      - property [1m/schema/properties/composedObject/properties/orderId[22m: [33mchanged[39m
      
        [31m[1mx [prevent response property type changes][22m expected response body property 'orderId' not to be expanded. This is a breaking change.[39m
        at [4mpetstore-updated.json:87:2895[24m
        
      - property [1m/schema/properties/stringOrNumberOrObject[22m: [33mchanged[39m
      
        [31m[1mx [prevent narrowing in response union types][22m response property oneOf schema did not overlap with the previous schema. oneOf/2: type object was changed to string[39m
        at [4mpetstore-updated.json:80:2583[24m
        
      - property [1m/schema/properties/oneOfToObject[22m: [33mchanged[39m
      
        [31m[1mx [prevent narrowing in response union types][22m response property changed from oneOf did not overlap with the previous schema. oneOf/0/id: was made optional[39m
        at [4mpetstore-updated.json:76:2389[24m
        
[34mRerun this command with the --web flag to view the detailed changes in your browser[39m
"
`;

exports[`diff reads optic.dev.yml for rulesets 1`] = `
"[31mx [39m[1mEmpty[22m [90mexample-api-v0.json[39m
[1mOperations: [22m1 operation added, 3 changed, 1 removed
[31mx [39m [1mChecks:[22m 3/5 passed 

[31mx [1mGET[22m /invalid_name[39m: [32madded[39m
  
  [31m[1mx [operation path component naming check][22m invalid_name is not camelCase[39m
  at [4mexample-api-v1.json:31:632[24m
  
[31mx [1mPOST[22m /example[39m: [31mremoved[39m
  
  [31m[1mx [prevent operation removal][22m cannot remove an operation. This is a breaking change.[39m
  at [4mexample-api-v0.json:9:150[24m
  
[32mâœ” [1mPATCH[22m /example[39m: 
  - /operationId [33mchanged[39m
  
  - response [1m200[22m: [32madded[39m
[32mâœ” [1mPUT[22m /example[39m: 
  - /operationId [33mchanged[39m
  
[32mâœ” [1mGET[22m /example[39m: 
  - /operationId [33mchanged[39m
  
[34mRerun this command with the --web flag to view the detailed changes in your browser[39m
"
`;

exports[`diff two files, no repo or config 1`] = `
"[1mEmpty[22m [90mexample-api-v0.json[39m
[1mOperations: [22m4 operations changed

[1mPATCH[22m /example: 
  - /operationId [33mchanged[39m
  
  - response [1m200[22m: [32madded[39m
[1mPUT[22m /example: 
  - /operationId [33mchanged[39m
  
[1mPOST[22m /example: 
  - /operationId [33mchanged[39m
  
[1mGET[22m /example: 
  - /operationId [33mchanged[39m
  
[34mRerun this command with the --web flag to view the detailed changes in your browser[39m
"
`;

exports[`diff with --json arg 1`] = `
"{"operations":[{"name":"GET /pet/findByStatus","change":"added","attributes":[{"key":"","after":{"tags":["pet"],"summary":"Finds Pets by status","description":"Multiple status values can be provided with comma separated strings","operationId":"findPetsByStatus","parameters":[{"name":"status","in":"query","description":"Status values that need to be considered for filter","required":true,"style":"form","explode":true,"schema":{"type":"array","items":{"type":"string","default":"available","enum":["available","pending","sold"]}}},{"name":"debug","in":"cookie","description":"A debug token","required":false,"schema":{"type":"integer","enum":[0,1]}}],"responses":{"200":{"description":"successful operation","content":{"application/xml":{"schema":{"type":"array","items":{"required":["name","photoUrls"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}}}},"application/json":{"schema":{"type":"array","items":{"required":["name","photoUrls"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}}}}},"headers":{}},"400":{"description":"Invalid status value","content":{},"headers":{}}},"security":[{"petstore_auth":["write:pets","read:pets"]}]},"change":"added"}],"parameters":[],"responses":[]},{"name":"GET /pet/findByTags","change":"added","attributes":[{"key":"","after":{"tags":["pet"],"summary":"Finds Pets by tags","description":"Muliple tags can be provided with comma separated strings. Use         tag1, tag2, tag3 for testing.","operationId":"findPetsByTags","parameters":[{"name":"tags","in":"query","description":"Tags to filter by","required":true,"style":"form","explode":true,"schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"successful operation","content":{"application/xml":{"schema":{"type":"array","items":{"required":["name","photoUrls"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}}}},"application/json":{"schema":{"type":"array","items":{"required":["name","photoUrls"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}}}}},"headers":{}},"400":{"description":"Invalid tag value","content":{},"headers":{}}},"deprecated":true,"security":[{"petstore_auth":["write:pets","read:pets"]}]},"change":"added"}],"parameters":[],"responses":[]},{"name":"GET /pet/{petId}","change":"added","attributes":[{"key":"","after":{"tags":["pet"],"summary":"Find pet by ID","description":"Returns a single pet","operationId":"getPetById","parameters":[{"name":"petId","in":"path","description":"ID of pet to return","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"successful operation","content":{"application/xml":{"schema":{"required":["name","photoUrls"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}}},"application/json":{"schema":{"required":["name","photoUrls"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}}}},"headers":{}},"400":{"description":"Invalid ID supplied","content":{},"headers":{}},"404":{"description":"Pet not found","content":{},"headers":{}}},"security":[{"api_key":[]}]},"change":"added"}],"parameters":[],"responses":[]},{"name":"POST /pet/{petId}","change":"added","attributes":[{"key":"","after":{"tags":["pet"],"summary":"Updates a pet in the store with form data","operationId":"updatePetWithForm","parameters":[{"name":"petId","in":"path","description":"ID of pet that needs to be updated","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"properties":{"name":{"type":"string","description":"Updated name of the pet"},"status":{"type":"string","description":"Updated status of the pet"}}}}}},"responses":{"405":{"description":"Invalid input","content":{},"headers":{}}},"security":[{"petstore_auth":["write:pets","read:pets"]}]},"change":"added"}],"parameters":[],"responses":[]},{"name":"DELETE /pet/{petId}","change":"added","attributes":[{"key":"","after":{"tags":["pet"],"summary":"Deletes a pet","operationId":"deletePet","parameters":[{"name":"api_key","in":"header","schema":{"type":"string"}},{"name":"petId","in":"path","description":"Pet id to delete","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Invalid ID supplied","content":{},"headers":{}},"404":{"description":"Pet not found","content":{},"headers":{}}},"security":[{"petstore_auth":["write:pets","read:pets"]}]},"change":"added"}],"parameters":[],"responses":[]},{"name":"PUT /user/{username}","change":"changed","attributes":[],"parameters":[],"requestBody":{"name":"Request Body","change":"changed","attributes":[],"contentTypes":[{"name":"*/*","change":"changed","attributes":[{"key":"/schema/properties/phone","before":{"type":"string","required":false},"change":"removed"},{"key":"/schema/properties/bio","after":{"type":"string","required":false},"change":"added"},{"key":"/schema/properties/userStatus","change":"changed","before":{"type":"integer","format":"int32"},"after":{"type":"string","enum":["activation-pending","activated","blocked"]}},{"key":"/schema/properties/lastName","change":"changed","before":{"required":true},"after":{"required":false}},{"key":"/schema/properties/username","change":"changed","before":{"required":false},"after":{"required":true}}]}]},"responses":[]},{"name":"GET /user/{username}","change":"changed","attributes":[],"parameters":[],"responses":[{"name":"200 response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"changed","attributes":[{"key":"/schema/properties/phone","before":{"type":"string","required":false},"change":"removed"},{"key":"/schema/properties/bio","after":{"type":"string","required":false},"change":"added"},{"key":"/schema/properties/userStatus","change":"changed","before":{"type":"integer","format":"int32"},"after":{"type":"string","enum":["activation-pending","activated","blocked"]}},{"key":"/schema/properties/lastName","change":"changed","before":{"required":true},"after":{"required":false}},{"key":"/schema/properties/username","change":"changed","before":{"required":false},"after":{"required":true}}]},{"name":"application/xml","change":"changed","attributes":[{"key":"/schema/properties/phone","before":{"type":"string","required":false},"change":"removed"},{"key":"/schema/properties/bio","after":{"type":"string","required":false},"change":"added"},{"key":"/schema/properties/userStatus","change":"changed","before":{"type":"integer","format":"int32"},"after":{"type":"string","enum":["activation-pending","activated","blocked"]}},{"key":"/schema/properties/lastName","change":"changed","before":{"required":true},"after":{"required":false}},{"key":"/schema/properties/username","change":"changed","before":{"required":false},"after":{"required":true}}]}],"headers":[]},{"name":"404 response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"added","attributes":[{"key":"","after":{"schema":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"type":{"type":"string"},"message":{"type":"string"}}}},"change":"added"}]}],"headers":[]}]},{"name":"GET /user/login","change":"changed","attributes":[],"parameters":[],"responses":[{"name":"200 response","change":"changed","attributes":[],"contentTypes":[],"headers":[{"name":"response header content-type","change":"removed","attributes":[{"key":"","before":{"description":"the description goes here","schema":{"type":"string"}},"change":"removed"}]},{"name":"response header X-Rate-Limit","change":"added","attributes":[{"key":"","after":{"description":"calls per hour allowed by the user","schema":{"type":"integer","format":"int32"}},"change":"added"}]},{"name":"response header X-Expires-After","change":"changed","attributes":[{"key":"/schema/type","change":"changed","before":"number","after":"string"},{"key":"/schema/format","after":"date-time","change":"added"}]}]}]},{"name":"POST /user/createWithList","change":"changed","attributes":[],"parameters":[],"requestBody":{"name":"Request Body","change":"changed","attributes":[],"contentTypes":[{"name":"*/*","change":"changed","attributes":[{"key":"/schema/items/properties/phone","before":{"type":"string","required":false},"change":"removed"},{"key":"/schema/items/properties/bio","after":{"type":"string","required":false},"change":"added"},{"key":"/schema/items/properties/userStatus","change":"changed","before":{"type":"integer","format":"int32"},"after":{"type":"string","enum":["activation-pending","activated","blocked"]}},{"key":"","change":"changed","before":{"schema":{"items":{"required":["id","email","lastName","userStatus"],"properties":{"phone":{"type":"string"},"userStatus":{"type":"integer","format":"int32"}}}}},"after":{"schema":{"items":{"required":["id","email","username","userStatus"],"properties":{"userStatus":{"type":"string","enum":["activation-pending","activated","blocked"]},"bio":{"type":"string"}}}}}}]}]},"responses":[]},{"name":"POST /user/createWithArray","change":"changed","attributes":[],"parameters":[],"requestBody":{"name":"Request Body","change":"changed","attributes":[],"contentTypes":[{"name":"*/*","change":"changed","attributes":[{"key":"/schema/items/properties/phone","before":{"type":"string","required":false},"change":"removed"},{"key":"/schema/items/properties/bio","after":{"type":"string","required":false},"change":"added"},{"key":"/schema/items/properties/userStatus","change":"changed","before":{"type":"integer","format":"int32"},"after":{"type":"string","enum":["activation-pending","activated","blocked"]}},{"key":"","change":"changed","before":{"schema":{"items":{"required":["id","email","lastName","userStatus"],"properties":{"phone":{"type":"string"},"userStatus":{"type":"integer","format":"int32"}}}}},"after":{"schema":{"items":{"required":["id","email","username","userStatus"],"properties":{"userStatus":{"type":"string","enum":["activation-pending","activated","blocked"]},"bio":{"type":"string"}}}}}}]}]},"responses":[]},{"name":"POST /user","change":"changed","attributes":[],"parameters":[],"requestBody":{"name":"Request Body","change":"changed","attributes":[],"contentTypes":[{"name":"*/*","change":"changed","attributes":[{"key":"/schema/properties/phone","before":{"type":"string","required":false},"change":"removed"},{"key":"/schema/properties/bio","after":{"type":"string","required":false},"change":"added"},{"key":"/schema/properties/userStatus","change":"changed","before":{"type":"integer","format":"int32"},"after":{"type":"string","enum":["activation-pending","activated","blocked"]}},{"key":"/schema/properties/lastName","change":"changed","before":{"required":true},"after":{"required":false}},{"key":"/schema/properties/username","change":"changed","before":{"required":false},"after":{"required":true}}]}]},"responses":[]},{"name":"DELETE /store/order/{orderId}","change":"changed","attributes":[],"parameters":[],"responses":[{"name":"404 response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"added","attributes":[{"key":"","after":{"schema":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"type":{"type":"string"},"message":{"type":"string"}}}},"change":"added"}]}],"headers":[]}]},{"name":"GET /store/order/{orderId}","change":"changed","attributes":[],"parameters":[],"responses":[{"name":"200 response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"changed","attributes":[{"key":"/schema/properties/summary","after":{"type":"string","description":"Human readable summary of order","required":false},"change":"added"},{"key":"/schema/properties/status","change":"changed","before":{"enum":["placed","approved","delivered"]},"after":{"enum":["placed","delivered","canceled"]}}]},{"name":"application/xml","change":"changed","attributes":[{"key":"/schema/properties/summary","after":{"type":"string","description":"Human readable summary of order","required":false},"change":"added"},{"key":"/schema/properties/status","change":"changed","before":{"enum":["placed","approved","delivered"]},"after":{"enum":["placed","delivered","canceled"]}},{"key":"/schema/properties/petId","change":"changed","before":{"required":true},"after":{"required":false}}]}],"headers":[]},{"name":"404 response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"added","attributes":[{"key":"","after":{"schema":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"type":{"type":"string"},"message":{"type":"string"}}}},"change":"added"}]}],"headers":[]}]},{"name":"POST /store/order","change":"changed","attributes":[],"parameters":[],"requestBody":{"name":"Request Body","change":"changed","attributes":[],"contentTypes":[{"name":"*/*","change":"changed","attributes":[{"key":"/schema/properties/summary","after":{"type":"string","description":"Human readable summary of order","required":false},"change":"added"},{"key":"/schema/properties/status","change":"changed","before":{"enum":["placed","approved","delivered"]},"after":{"enum":["placed","delivered","canceled"]}}]}]},"responses":[{"name":"200 response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"changed","attributes":[{"key":"/schema/properties/summary","after":{"type":"string","description":"Human readable summary of order","required":false},"change":"added"},{"key":"/schema/properties/status","change":"changed","before":{"enum":["placed","approved","delivered"]},"after":{"enum":["placed","delivered","canceled"]}},{"key":"/example","after":{"id":458102,"petId":581231,"quantity":31,"shipDate":"2022-03-04T22:54:32.631Z","status":"delivered","summary":"31 boxes of dog food","complete":false},"change":"added"}]},{"name":"application/xml","change":"changed","attributes":[{"key":"/schema/properties/summary","after":{"type":"string","description":"Human readable summary of order","required":false},"change":"added"},{"key":"/schema/properties/status","change":"changed","before":{"enum":["placed","approved","delivered"]},"after":{"enum":["placed","delivered","canceled"]}}]}],"headers":[]}]},{"name":"POST /pet/{petId}/uploadImage","change":"changed","attributes":[],"parameters":[{"name":"cookie parameter 'debug'","change":"changed","attributes":[{"key":"/schema/enum","after":[0,1],"change":"added"}]}],"responses":[{"name":"200 response","change":"removed","attributes":[{"key":"","before":{"description":"successful operation","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"type":{"type":"string"},"message":{"type":"string"}}}}},"headers":{}},"change":"removed"}],"contentTypes":[],"headers":[]},{"name":"201 response","change":"added","attributes":[{"key":"","after":{"description":"successful operation","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"type":{"type":"string"},"message":{"type":"string"}}}}},"headers":{}},"change":"added"}],"contentTypes":[],"headers":[]},{"name":"404 response","change":"added","attributes":[{"key":"","after":{"description":"Pet not found","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"type":{"type":"string"},"message":{"type":"string"}}}}},"headers":{}},"change":"added"}],"contentTypes":[],"headers":[]},{"name":"default response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"changed","attributes":[{"key":"/schema/properties/type","change":"changed","before":{"type":"string"},"after":{"type":"integer"}}]}],"headers":[]}]},{"name":"GET /pet","change":"removed","attributes":[{"key":"","before":{"responses":{"404":{"description":"Pet not found","content":{},"headers":{}},"405":{"description":"Validation exception","content":{},"headers":{}}},"parameters":[]},"change":"removed"}],"parameters":[],"responses":[]},{"name":"POST /pet","change":"changed","attributes":[{"key":"/operationId","change":"changed","before":"addPet","after":"addPet-change"}],"parameters":[],"responses":[]},{"name":"PUT /pet","change":"changed","attributes":[],"parameters":[],"requestBody":{"name":"Request Body","change":"changed","attributes":[],"contentTypes":[{"name":"application/xml","change":"removed","attributes":[{"key":"","before":{"schema":{"required":["name","photoUrls"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"category":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Category"}},"name":{"type":"string","example":"doggie"},"photoUrls":{"type":"array","xml":{"name":"photoUrl","wrapped":true},"items":{"type":"string"}},"tags":{"type":"array","xml":{"name":"tag","wrapped":true},"items":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"}},"xml":{"name":"Tag"}}},"status":{"type":"string","description":"pet status in the store","enum":["available","pending","sold"]}},"xml":{"name":"Pet"}}},"change":"removed"}]},{"name":"application/json","change":"changed","attributes":[{"key":"/schema/properties/name","before":{"type":"string","example":"doggie","required":true},"change":"removed"},{"key":"/schema/properties/number","after":{"type":"string","required":true},"change":"added"}]}]},"responses":[{"name":"400 response","change":"removed","attributes":[{"key":"","before":{"description":"Invalid ID supplied","content":{},"headers":{}},"change":"removed"}],"contentTypes":[],"headers":[]}]},{"name":"GET /parameters_at_path","change":"changed","attributes":[],"parameters":[{"name":"query parameter 'query_in_path'","change":"added","attributes":[{"key":"","after":{"name":"query_in_path","in":"query","description":"asada","required":true,"schema":{"type":"string"}},"change":"added"}]}],"responses":[]},{"name":"PATCH /example","change":"changed","attributes":[],"parameters":[{"name":"query parameter 'seomthing'","change":"added","attributes":[{"key":"","after":{"name":"seomthing","in":"query","description":"something","required":true,"schema":{"type":"string"}},"change":"added"}]}],"responses":[]},{"name":"POST /example","change":"changed","attributes":[],"parameters":[{"name":"query parameter 'somethingelse'","change":"removed","attributes":[{"key":"","before":{"name":"somethingelse","in":"query","description":"something","required":true,"schema":{"type":"string"}},"change":"removed"}]}],"responses":[]},{"name":"GET /example","change":"changed","attributes":[],"parameters":[{"name":"query parameter 'deletedQueryParameter'","change":"removed","attributes":[{"key":"","before":{"name":"deletedQueryParameter","in":"query","description":"The user name for login","required":true,"schema":{"type":"string"}},"change":"removed"}]},{"name":"query parameter 'addedQueryParameter'","change":"added","attributes":[{"key":"","after":{"name":"addedQueryParameter","in":"query","description":"The user name for login","required":true,"schema":{"type":"string"}},"change":"added"}]},{"name":"query parameter 'requiredToOptional'","change":"changed","attributes":[{"key":"/required","before":true,"change":"removed"}]},{"name":"query parameter 'optionalToRequired'","change":"changed","attributes":[{"key":"/required","after":true,"change":"added"}]}],"responses":[{"name":"200 response","change":"changed","attributes":[],"contentTypes":[{"name":"application/json","change":"changed","attributes":[{"key":"/schema/properties/toTypeArrays","change":"changed","before":{"type":"string"},"after":{"type":["string","number"]}},{"key":"/schema/properties/fromTypeArrays","change":"changed","before":{"type":["string","number"]},"after":{"type":"string"}},{"key":"/schema/properties/requiredKeys/properties/requiredToOptional","change":"changed","before":{"required":true},"after":{"required":false}},{"key":"/schema/properties/requiredKeys/properties/deletedRequiredKey","before":{"type":"string","required":true},"change":"removed"},{"key":"/schema/properties/requiredKeys/properties/optionalToRequired","change":"changed","before":{"required":false},"after":{"required":true}},{"key":"/schema/properties/requiredKeys/properties/addedRequiredKey","after":{"type":"string","required":true},"change":"added"},{"key":"/schema/properties/expandableObject","change":"changed","before":{"anyOf":[{"type":"object","properties":{"orderId":{"type":"string"}}}]},"after":{"anyOf":[{"type":"object","properties":{"orderId":{"type":"string"}}},{"type":"object","properties":{"order":{"type":"object","properties":{"id":{"type":"string"}}}}}]}},{"key":"/schema/properties/composedObject/properties/orderId","change":"changed","before":{"type":"string"},"after":{"type":"number"}},{"key":"/schema/properties/stringOrNumberOrObject","change":"changed","before":{"oneOf":[{"type":"string"},{"type":"number"},{"type":"object","properties":{"orderId":{"type":"string"}}}]},"after":{"oneOf":[{"type":"string"},{"type":"number"}]}},{"key":"/schema/properties/oneOfToObject","change":"changed","before":{"oneOf":[{"type":"object","properties":{"id":{"type":"string"}},"required":["id"]},{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]}]},"after":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"}}}}]}],"headers":[]}]}]}
"
`;

exports[`diff with --last-change arg 1`] = `
"Finding last change...
[32mâœ” [39m[1mEmpty[22m [90mexample-api.json[39m
[1mOperations: [22m1 operation changed

[32mâœ” [1mPATCH[22m /example[39m: 
  - response [1m200[22m: 
    - /description [33mchanged[39m
    
    - body [1mapplication/json[22m: 
        - /example [33mchanged[39m
        
[34mRerun this command with the --web flag to view the detailed changes in your browser[39m
"
`;

exports[`diff with --standard arg 1`] = `
"[31mx [39m[1mEmpty[22m [90mexample-api-v0.json[39m
[1mOperations: [22m1 operation added, 3 changed, 1 removed
[31mx [39m [1mChecks:[22m 3/5 passed 

[31mx [1mGET[22m /invalid_name[39m: [32madded[39m
  
  [31m[1mx [operation path component naming check][22m invalid_name is not camelCase[39m
  at [4mexample-api-v1.json:31:632[24m
  
[31mx [1mPOST[22m /example[39m: [31mremoved[39m
  
  [31m[1mx [prevent operation removal][22m cannot remove an operation. This is a breaking change.[39m
  at [4mexample-api-v0.json:9:150[24m
  
[32mâœ” [1mPATCH[22m /example[39m: 
  - /operationId [33mchanged[39m
  
  - response [1m200[22m: [32madded[39m
[32mâœ” [1mPUT[22m /example[39m: 
  - /operationId [33mchanged[39m
  
[32mâœ” [1mGET[22m /example[39m: 
  - /operationId [33mchanged[39m
  
[34mRerun this command with the --web flag to view the detailed changes in your browser[39m
"
`;
